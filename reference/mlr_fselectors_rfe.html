<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Feature Selection with Recursive Feature Elimination — mlr_fselectors_rfe • mlr3fselect</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Feature Selection with Recursive Feature Elimination — mlr_fselectors_rfe"><meta name="description" content="Feature selection using the Recursive Feature Elimination (RFE) algorithm.
Recursive feature elimination iteratively removes features with a low importance score.
Only works with mlr3::Learners that can calculate importance scores (see the section on optional extractors in mlr3::Learner)."><meta property="og:description" content="Feature selection using the Recursive Feature Elimination (RFE) algorithm.
Recursive feature elimination iteratively removes features with a low importance score.
Only works with mlr3::Learners that can calculate importance scores (see the section on optional extractors in mlr3::Learner)."><meta property="og:image" content="https://mlr3fselect.mlr-org.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3fselect</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3fselect/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/"><span class="fa fa-rss"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Feature Selection with Recursive Feature Elimination</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3fselect/blob/main/R/FSelectorBatchRFE.R" class="external-link"><code>R/FSelectorBatchRFE.R</code></a></small>
      <div class="d-none name"><code>mlr_fselectors_rfe.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Feature selection using the Recursive Feature Elimination (RFE) algorithm.
Recursive feature elimination iteratively removes features with a low importance score.
Only works with <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a>s that can calculate importance scores (see the section on optional extractors in <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a>).</p>
    </div>


    <div class="section level2">
    <h2 id="source">Source<a class="anchor" aria-label="anchor" href="#source"></a></h2>
    <p>Guyon I, Weston J, Barnhill S, Vapnik V (2002).
“Gene Selection for Cancer Classification using Support Vector Machines.”
<em>Machine Learning</em>, <b>46</b>(1), 389–422.
ISSN 1573-0565, <a href="https://doi.org/10.1023/A%3A1012487302797" class="external-link">doi:10.1023/A:1012487302797</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The learner is trained on all features at the start and importance scores are calculated for each feature.
Then the least important feature is removed and the learner is trained on the reduced feature set.
The importance scores are calculated again and the procedure is repeated until the desired number of features is reached.
The non-recursive option (<code>recursive = FALSE</code>) only uses the importance scores calculated in the first iteration.</p>
<p>The feature selection terminates itself when <code>n_features</code> is reached.
It is not necessary to set a termination criterion.</p>
<p>When using a cross-validation resampling strategy, the importance scores of the resampling iterations are aggregated.
The parameter <code>aggregation</code> determines how the importance scores are aggregated.
By default (<code>"rank"</code>), the importance score vector of each fold is ranked and the feature with the lowest average rank is removed.
The option <code>"mean"</code> averages the score of each feature across the resampling iterations and removes the feature with the lowest average score.
Averaging the scores is not appropriate for most importance measures.</p>
    </div>
    <div class="section level2">
    <h2 id="archive">Archive<a class="anchor" aria-label="anchor" href="#archive"></a></h2>


<p>The <a href="ArchiveBatchFSelect.html">ArchiveBatchFSelect</a> holds the following additional columns:</p><ul><li><p><code>"importance"</code> (<code><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric()</a></code>)<br>
The importance score vector of the feature subset.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a></h2>


<p>The <a href="https://mlr-org.com/gallery.html" class="external-link">gallery</a> features a collection of case studies and demos about optimization.</p><ul><li><p>Utilize the built-in feature importance of models with <a href="https://mlr-org.com/gallery/optimization/2023-02-07-recursive-feature-elimination/" class="external-link">Recursive Feature Elimination</a>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="dictionary">Dictionary<a class="anchor" aria-label="anchor" href="#dictionary"></a></h2>


<p>This <a href="FSelector.html">FSelector</a> can be instantiated with the associated sugar function <code><a href="fs.html">fs()</a></code>:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">fs</span>(<span class="st">"rfe"</span>)</span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="control-parameters">Control Parameters<a class="anchor" aria-label="anchor" href="#control-parameters"></a></h2>


<dl><dt><code>n_features</code></dt>
<dd><p><code>integer(1)</code><br>
The minimum number of features to select, by default half of the features.</p></dd>

<dt><code>feature_fraction</code></dt>
<dd><p><code>double(1)</code><br>
Fraction of features to retain in each iteration.
The default of 0.5 retains half of the features.</p></dd>

<dt><code>feature_number</code></dt>
<dd><p><code>integer(1)</code><br>
Number of features to remove in each iteration.</p></dd>

<dt><code>subset_sizes</code></dt>
<dd><p><code><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer()</a></code><br>
Vector of the number of features to retain in each iteration.
Must be sorted in decreasing order.</p></dd>

<dt><code>recursive</code></dt>
<dd><p><code>logical(1)</code><br>
If <code>TRUE</code> (default), the feature importance is calculated in each iteration.</p></dd>

<dt><code>aggregation</code></dt>
<dd><p><code>character(1)</code><br>
The aggregation method for the importance scores of the resampling iterations.
See details.</p></dd>


</dl><p>The parameter <code>feature_fraction</code>, <code>feature_number</code> and <code>subset_sizes</code> are mutually exclusive.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other FSelector:
<code><a href="FSelector.html">FSelector</a></code>,
<code><a href="mlr_fselectors.html">mlr_fselectors</a></code>,
<code><a href="mlr_fselectors_design_points.html">mlr_fselectors_design_points</a></code>,
<code><a href="mlr_fselectors_exhaustive_search.html">mlr_fselectors_exhaustive_search</a></code>,
<code><a href="mlr_fselectors_genetic_search.html">mlr_fselectors_genetic_search</a></code>,
<code><a href="mlr_fselectors_random_search.html">mlr_fselectors_random_search</a></code>,
<code><a href="mlr_fselectors_rfecv.html">mlr_fselectors_rfecv</a></code>,
<code><a href="mlr_fselectors_sequential.html">mlr_fselectors_sequential</a></code>,
<code><a href="mlr_fselectors_shadow_variable_search.html">mlr_fselectors_shadow_variable_search</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="super-classes">Super classes<a class="anchor" aria-label="anchor" href="#super-classes"></a></h2>
    <p><code><a href="FSelector.html">mlr3fselect::FSelector</a></code> -&gt; <code><a href="FSelectorBatch.html">mlr3fselect::FSelectorBatch</a></code> -&gt; <code>FSelectorBatchRFE</code></p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-FSelectorBatchRFE-new"><code>FSelectorBatchRFE$new()</code></a></p></li>
<li><p><a href="#method-FSelectorBatchRFE-clone"><code>FSelectorBatchRFE$clone()</code></a></p></li>
</ul></div><p><details open><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="mlr3fselect" data-topic="FSelector" data-id="format"><a href="FSelector.html#method-format"><code>mlr3fselect::FSelector$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3fselect" data-topic="FSelector" data-id="help"><a href="FSelector.html#method-help"><code>mlr3fselect::FSelector$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3fselect" data-topic="FSelector" data-id="print"><a href="FSelector.html#method-print"><code>mlr3fselect::FSelector$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3fselect" data-topic="FSelectorBatch" data-id="optimize"><a href="FSelectorBatch.html#method-optimize"><code>mlr3fselect::FSelectorBatch$optimize()</code></a></span></li>
</ul></details></p><hr><a id="method-FSelectorBatchRFE-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Creates a new instance of this <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a> class.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/mlr_fselectors_rfe.html">FSelectorBatchRFE</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-FSelectorBatchRFE-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FSelectorBatchRFE</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Feature Selection</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># retrieve task and load learner</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"penguins"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">learner</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run feature selection on the Palmer Penguins data set</span></span></span>
<span class="r-in"><span><span class="va">instance</span> <span class="op">=</span> <span class="fu"><a href="fselect.html">fselect</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  fselector <span class="op">=</span> <span class="fu"><a href="fs.html">fs</a></span><span class="op">(</span><span class="st">"rfe"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  task <span class="op">=</span> <span class="va">task</span>,</span></span>
<span class="r-in"><span>  learner <span class="op">=</span> <span class="va">learner</span>,</span></span>
<span class="r-in"><span>  resampling <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">msr</a></span><span class="op">(</span><span class="st">"classif.ce"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  store_models <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># best performing feature subset</span></span></span>
<span class="r-in"><span><span class="va">instance</span><span class="op">$</span><span class="va">result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island    sex   year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         importance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 7,6,5,4,3,2,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                          features n_features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                            &lt;list&gt;      &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: bill_depth,bill_length,body_mass,flipper_length,island,sex,...          7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.05217391</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># all evaluated feature subsets</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">instance</span><span class="op">$</span><span class="va">archive</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island    sex   year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:       TRUE        TRUE     FALSE           TRUE  FALSE  FALSE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce runtime_learners           timestamp batch_nr warnings errors</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;            &lt;num&gt;              &lt;POSc&gt;    &lt;int&gt;    &lt;int&gt;  &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.05217391            0.005 2024-10-15 16:37:45        1        0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 0.06086957            0.005 2024-10-15 16:37:45        2        0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         importance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 7,6,5,4,3,2,...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:           3,2,1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                          features n_features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                            &lt;list&gt;     &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: bill_depth,bill_length,body_mass,flipper_length,island,sex,...          7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:                          bill_depth,bill_length,flipper_length          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     resample_result</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: &lt;ResampleResult&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: &lt;ResampleResult&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># subset the task and fit the final model</span></span></span>
<span class="r-in"><span><span class="va">task</span><span class="op">$</span><span class="fu">select</span><span class="op">(</span><span class="va">instance</span><span class="op">$</span><span class="va">result_feature_set</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">learner</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="va">task</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marc Becker, Patrick Schratz, Michel Lang, Bernd Bischl, John Zobolas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

