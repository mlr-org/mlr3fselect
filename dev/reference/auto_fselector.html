<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Function for Automatic Feature Selection — auto_fselector • mlr3fselect</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function for Automatic Feature Selection — auto_fselector"><meta name="description" content="The AutoFSelector wraps a mlr3::Learner and augments it with an automatic feature selection.
The auto_fselector() function creates an AutoFSelector object."><meta property="og:description" content="The AutoFSelector wraps a mlr3::Learner and augments it with an automatic feature selection.
The auto_fselector() function creates an AutoFSelector object."><meta property="og:image" content="https://mlr3fselect.mlr-org.com/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3fselect</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3fselect/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Function for Automatic Feature Selection</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3fselect/blob/main/R/auto_fselector.R" class="external-link"><code>R/auto_fselector.R</code></a></small>
      <div class="d-none name"><code>auto_fselector.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <a href="AutoFSelector.html">AutoFSelector</a> wraps a <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a> and augments it with an automatic feature selection.
The <code>auto_fselector()</code> function creates an <a href="AutoFSelector.html">AutoFSelector</a> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">auto_fselector</span><span class="op">(</span></span>
<span>  <span class="va">fselector</span>,</span>
<span>  <span class="va">learner</span>,</span>
<span>  <span class="va">resampling</span>,</span>
<span>  measure <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  term_evals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  term_time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  terminator <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  store_fselect_instance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  store_benchmark_result <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  store_models <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_values <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  callbacks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ties_method <span class="op">=</span> <span class="st">"least_features"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fselector">fselector<a class="anchor" aria-label="anchor" href="#arg-fselector"></a></dt>
<dd><p>(<a href="FSelector.html">FSelector</a>)<br>
Optimization algorithm.</p></dd>


<dt id="arg-learner">learner<a class="anchor" aria-label="anchor" href="#arg-learner"></a></dt>
<dd><p>(<a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a>)<br>
Learner to optimize the feature subset for.</p></dd>


<dt id="arg-resampling">resampling<a class="anchor" aria-label="anchor" href="#arg-resampling"></a></dt>
<dd><p>(<a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a>)<br>
Resampling that is used to evaluated the performance of the feature subsets.
Uninstantiated resamplings are instantiated during construction so that all feature subsets are evaluated on the same data splits.
Already instantiated resamplings are kept unchanged.</p></dd>


<dt id="arg-measure">measure<a class="anchor" aria-label="anchor" href="#arg-measure"></a></dt>
<dd><p>(<a href="https://mlr3.mlr-org.com/reference/Measure.html" class="external-link">mlr3::Measure</a>)<br>
Measure to optimize. If <code>NULL</code>, default measure is used.</p></dd>


<dt id="arg-term-evals">term_evals<a class="anchor" aria-label="anchor" href="#arg-term-evals"></a></dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of allowed evaluations.
Ignored if <code>terminator</code> is passed.</p></dd>


<dt id="arg-term-time">term_time<a class="anchor" aria-label="anchor" href="#arg-term-time"></a></dt>
<dd><p>(<code>integer(1)</code>)<br>
Maximum allowed time in seconds.
Ignored if <code>terminator</code> is passed.</p></dd>


<dt id="arg-terminator">terminator<a class="anchor" aria-label="anchor" href="#arg-terminator"></a></dt>
<dd><p>(<a href="https://bbotk.mlr-org.com/reference/Terminator.html" class="external-link">bbotk::Terminator</a>)<br>
Stop criterion of the feature selection.</p></dd>


<dt id="arg-store-fselect-instance">store_fselect_instance<a class="anchor" aria-label="anchor" href="#arg-store-fselect-instance"></a></dt>
<dd><p>(<code>logical(1)</code>)<br>
If <code>TRUE</code> (default), stores the internally created <a href="FSelectInstanceBatchSingleCrit.html">FSelectInstanceBatchSingleCrit</a> with all intermediate results in slot <code>$fselect_instance</code>.
Is set to <code>TRUE</code>, if <code>store_models = TRUE</code></p></dd>


<dt id="arg-store-benchmark-result">store_benchmark_result<a class="anchor" aria-label="anchor" href="#arg-store-benchmark-result"></a></dt>
<dd><p>(<code>logical(1)</code>)<br>
Store benchmark result in archive?</p></dd>


<dt id="arg-store-models">store_models<a class="anchor" aria-label="anchor" href="#arg-store-models"></a></dt>
<dd><p>(<code>logical(1)</code>).
Store models in benchmark result?</p></dd>


<dt id="arg-check-values">check_values<a class="anchor" aria-label="anchor" href="#arg-check-values"></a></dt>
<dd><p>(<code>logical(1)</code>)<br>
Check the parameters before the evaluation and the results for
validity?</p></dd>


<dt id="arg-callbacks">callbacks<a class="anchor" aria-label="anchor" href="#arg-callbacks"></a></dt>
<dd><p>(list of <a href="CallbackBatchFSelect.html">CallbackBatchFSelect</a>)<br>
List of callbacks.</p></dd>


<dt id="arg-ties-method">ties_method<a class="anchor" aria-label="anchor" href="#arg-ties-method"></a></dt>
<dd><p>(<code>character(1)</code>)<br>
The method to break ties when selecting sets while optimizing and when selecting the best set.
Can be <code>"least_features"</code> or <code>"random"</code>.
The option <code>"least_features"</code> (default) selects the feature set with the least features.
If there are multiple best feature sets with the same number of features, one is selected randomly.
The <code>random</code> method returns a random feature set from the best feature sets.
Ignored if multiple measures are used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><a href="AutoFSelector.html">AutoFSelector</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <a href="AutoFSelector.html">AutoFSelector</a> is a <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a> which wraps another <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a> and performs the following steps during <code>$train()</code>:</p><ol><li><p>The wrapped (inner) learner is trained on the feature subsets via resampling.
The feature selection can be specified by providing a <a href="FSelector.html">FSelector</a>, a <a href="https://bbotk.mlr-org.com/reference/Terminator.html" class="external-link">bbotk::Terminator</a>, a <a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a> and a <a href="https://mlr3.mlr-org.com/reference/Measure.html" class="external-link">mlr3::Measure</a>.</p></li>
<li><p>A final model is fit on the complete training data with the best-found feature subset.</p></li>
</ol><p>During <code>$predict()</code> the <a href="AutoFSelector.html">AutoFSelector</a> just calls the predict method of the wrapped (inner) learner.</p>
    </div>
    <div class="section level2">
    <h2 id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a></h2>


<p>There are several sections about feature selection in the <a href="https://mlr3book.mlr-org.com" class="external-link">mlr3book</a>.</p><ul><li><p>Estimate Model Performance with <a href="https://mlr3book.mlr-org.com/chapters/chapter6/feature_selection.html#sec-autofselect" class="external-link">nested resampling</a>.</p></li>
</ul><p>The <a href="https://mlr-org.com/gallery.html" class="external-link">gallery</a> features a collection of case studies and demos about optimization.</p>
    </div>
    <div class="section level2">
    <h2 id="nested-resampling">Nested Resampling<a class="anchor" aria-label="anchor" href="#nested-resampling"></a></h2>


<p>Nested resampling can be performed by passing an <a href="AutoFSelector.html">AutoFSelector</a> object to <code><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">mlr3::resample()</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/benchmark.html" class="external-link">mlr3::benchmark()</a></code>.
To access the inner resampling results, set <code>store_fselect_instance = TRUE</code> and execute <code><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">mlr3::resample()</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/benchmark.html" class="external-link">mlr3::benchmark()</a></code> with <code>store_models = TRUE</code> (see examples).
The <a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a> passed to the <a href="AutoFSelector.html">AutoFSelector</a> is meant to be the inner resampling, operating on the training set of an arbitrary outer resampling.
For this reason it is not feasible to pass an instantiated <a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a> here.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Automatic Feature Selection</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># split to train and external set</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu">tsk</span><span class="op">(</span><span class="st">"penguins"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">split</span> <span class="op">=</span> <span class="fu">partition</span><span class="op">(</span><span class="va">task</span>, ratio <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create auto fselector</span></span></span>
<span class="r-in"><span><span class="va">afs</span> <span class="op">=</span> <span class="fu">auto_fselector</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fselector <span class="op">=</span> <span class="fu"><a href="fs.html">fs</a></span><span class="op">(</span><span class="st">"random_search"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  learner <span class="op">=</span> <span class="fu">lrn</span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  resampling <span class="op">=</span> <span class="fu">rsmp</span> <span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="fu">msr</span><span class="op">(</span><span class="st">"classif.ce"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  term_evals <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># optimize feature subset and fit final model</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="va">task</span>, row_ids <span class="op">=</span> <span class="va">split</span><span class="op">$</span><span class="va">train</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># predict with final model</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">task</span>, row_ids <span class="op">=</span> <span class="va">split</span><span class="op">$</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;PredictionClassif&gt; for 69 observations:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     row_ids     truth  response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           5    Adelie    Adelie</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          11    Adelie    Adelie</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          12    Adelie    Adelie</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         338 Chinstrap Chinstrap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         339 Chinstrap Chinstrap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         340 Chinstrap Chinstrap</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show result</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">fselect_result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island    sex   year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE  FALSE   TRUE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                               features n_features classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 &lt;list&gt;      &lt;int&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: bill_depth,bill_length,body_mass,flipper_length,sex          5 0.06521739</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># model slot contains trained learner and fselect instance</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">model</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $learner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;LearnerClassifRpart:classif.rpart&gt;: Classification Tree</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Model: rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Parameters: xval=0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Packages: mlr3, rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Predict Types:  [response], prob</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Feature Types: logical, integer, numeric, factor, ordered</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Properties: importance, missings, multiclass, selected_features,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   twoclass, weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "bill_depth"     "bill_length"    "body_mass"      "flipper_length"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "sex"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fselect_instance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;FSelectInstanceBatchSingleCrit&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * State:  Optimized</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Objective: &lt;ObjectiveFSelectBatch:classif.rpart_on_penguins&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Terminator: &lt;TerminatorEvals&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Result:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island    sex   year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE  FALSE   TRUE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Archive:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     bill_depth bill_length body_mass flipper_length island    sex   year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:       TRUE       FALSE     FALSE           TRUE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:       TRUE        TRUE      TRUE          FALSE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      FALSE        TRUE      TRUE          FALSE  FALSE  FALSE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:       TRUE        TRUE      TRUE          FALSE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:       TRUE        TRUE      TRUE           TRUE  FALSE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:       TRUE        TRUE      TRUE           TRUE  FALSE   TRUE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      FALSE       FALSE     FALSE          FALSE   TRUE  FALSE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:       TRUE        TRUE      TRUE           TRUE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      FALSE       FALSE     FALSE           TRUE   TRUE  FALSE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:       TRUE        TRUE      TRUE          FALSE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 0.16304348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 0.07608696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 0.13043478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 0.07608696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 0.31521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 0.16304348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 0.07608696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># shortcut trained learner</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">learner</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;LearnerClassifRpart:classif.rpart&gt;: Classification Tree</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Model: rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Parameters: xval=0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Packages: mlr3, rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Predict Types:  [response], prob</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Feature Types: logical, integer, numeric, factor, ordered</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Properties: importance, missings, multiclass, selected_features,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   twoclass, weights</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># shortcut fselect instance</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">fselect_instance</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;FSelectInstanceBatchSingleCrit&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * State:  Optimized</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Objective: &lt;ObjectiveFSelectBatch:classif.rpart_on_penguins&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Terminator: &lt;TerminatorEvals&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Result:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island    sex   year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE  FALSE   TRUE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Archive:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     bill_depth bill_length body_mass flipper_length island    sex   year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:       TRUE       FALSE     FALSE           TRUE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:       TRUE        TRUE      TRUE          FALSE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:      FALSE        TRUE      TRUE          FALSE  FALSE  FALSE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:       TRUE        TRUE      TRUE          FALSE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:       TRUE        TRUE      TRUE           TRUE  FALSE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:       TRUE        TRUE      TRUE           TRUE  FALSE   TRUE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:      FALSE       FALSE     FALSE          FALSE   TRUE  FALSE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:       TRUE        TRUE      TRUE           TRUE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:      FALSE       FALSE     FALSE           TRUE   TRUE  FALSE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:       TRUE        TRUE      TRUE          FALSE   TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 0.16304348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 0.07608696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 0.13043478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 0.07608696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 0.31521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 0.06521739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 0.16304348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 0.07608696</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Nested Resampling</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">afs</span> <span class="op">=</span> <span class="fu">auto_fselector</span><span class="op">(</span></span></span>
<span class="r-in"><span>  fselector <span class="op">=</span> <span class="fu"><a href="fs.html">fs</a></span><span class="op">(</span><span class="st">"random_search"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  learner <span class="op">=</span> <span class="fu">lrn</span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  resampling <span class="op">=</span> <span class="fu">rsmp</span> <span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="fu">msr</span><span class="op">(</span><span class="st">"classif.ce"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  term_evals <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">resampling_outer</span> <span class="op">=</span> <span class="fu">rsmp</span><span class="op">(</span><span class="st">"cv"</span>, folds <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rr</span> <span class="op">=</span> <span class="fu">resample</span><span class="op">(</span><span class="va">task</span>, <span class="va">afs</span>, <span class="va">resampling_outer</span>, store_models <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># retrieve inner feature selection results.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract_inner_fselect_results.html">extract_inner_fselect_results</a></span><span class="op">(</span><span class="va">rr</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    iteration bill_depth bill_length body_mass flipper_length island    sex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;int&gt;     &lt;lgcl&gt;      &lt;lgcl&gt;    &lt;lgcl&gt;         &lt;lgcl&gt; &lt;lgcl&gt; &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:         1       TRUE        TRUE      TRUE           TRUE   TRUE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:         2       TRUE        TRUE      TRUE          FALSE   TRUE  FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:         3       TRUE        TRUE      TRUE           TRUE   TRUE   TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      year classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;lgcl&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  FALSE 0.06578947</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:   TRUE 0.03947368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:   TRUE 0.06493506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                          features n_features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                            &lt;list&gt;      &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:         bill_depth,bill_length,body_mass,flipper_length,island          5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:                   bill_depth,bill_length,body_mass,island,year          5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: bill_depth,bill_length,body_mass,flipper_length,island,sex,...          7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     task_id              learner_id resampling_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;char&gt;                  &lt;char&gt;        &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: penguins classif.rpart.fselector            cv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: penguins classif.rpart.fselector            cv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: penguins classif.rpart.fselector            cv</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># performance scores estimated on the outer resampling</span></span></span>
<span class="r-in"><span><span class="va">rr</span><span class="op">$</span><span class="fu">score</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     task_id              learner_id resampling_id iteration classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;char&gt;                  &lt;char&gt;        &lt;char&gt;     &lt;int&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: penguins classif.rpart.fselector            cv         1 0.05217391</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: penguins classif.rpart.fselector            cv         2 0.05217391</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: penguins classif.rpart.fselector            cv         3 0.07017544</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hidden columns: task, learner, resampling, prediction</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># unbiased performance of the final model trained on the full data set</span></span></span>
<span class="r-in"><span><span class="va">rr</span><span class="op">$</span><span class="fu">aggregate</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> classif.ce </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.05817442 </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marc Becker, Patrick Schratz, Michel Lang, Bernd Bischl, John Zobolas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

