<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The AutoFSelector wraps a mlr3::Learner and augments it with an automatic feature selection.
The auto_fselector() function creates an AutoFSelector object."><title>Function for Automatic Feature Selection — auto_fselector • mlr3fselect</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.4/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.4/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.4/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function for Automatic Feature Selection — auto_fselector"><meta property="og:description" content="The AutoFSelector wraps a mlr3::Learner and augments it with an automatic feature selection.
The auto_fselector() function creates an AutoFSelector object."><meta property="og:image" content="https://mlr3fselect.mlr-org.com/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mlr3fselect</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.8.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mlr-org/mlr3fselect/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Function for Automatic Feature Selection</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3fselect/blob/HEAD/R/auto_fselector.R" class="external-link"><code>R/auto_fselector.R</code></a></small>
      <div class="d-none name"><code>auto_fselector.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <a href="AutoFSelector.html">AutoFSelector</a> wraps a <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a> and augments it with an automatic feature selection.
The <code>auto_fselector()</code> function creates an <a href="AutoFSelector.html">AutoFSelector</a> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">auto_fselector</span><span class="op">(</span></span>
<span>  <span class="va">method</span>,</span>
<span>  <span class="va">learner</span>,</span>
<span>  <span class="va">resampling</span>,</span>
<span>  measure <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  term_evals <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  term_time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  terminator <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  store_fselect_instance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  store_benchmark_result <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  store_models <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_values <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  callbacks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>method</dt>
<dd><p>(<code>character(1)</code> | <a href="FSelector.html">FSelector</a>)<br>
Key to retrieve fselector from <a href="mlr_fselectors.html">mlr_fselectors</a> dictionary or <a href="FSelector.html">FSelector</a> object.</p></dd>


<dt>learner</dt>
<dd><p>(<a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a>)<br>
Learner to optimize the feature subset for.</p></dd>


<dt>resampling</dt>
<dd><p>(<a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a>)<br>
Resampling that is used to evaluated the performance of the feature subsets.
Uninstantiated resamplings are instantiated during construction so that all feature subsets are evaluated on the same data splits.
Already instantiated resamplings are kept unchanged.</p></dd>


<dt>measure</dt>
<dd><p>(<a href="https://mlr3.mlr-org.com/reference/Measure.html" class="external-link">mlr3::Measure</a>)<br>
Measure to optimize. If <code>NULL</code>, default measure is used.</p></dd>


<dt>term_evals</dt>
<dd><p>(<code>integer(1)</code>)<br>
Number of allowed evaluations.</p></dd>


<dt>term_time</dt>
<dd><p>(<code>integer(1)</code>)<br>
Maximum allowed time in seconds.</p></dd>


<dt>terminator</dt>
<dd><p>(Terminator)<br>
Stop criterion of the feature selection.</p></dd>


<dt>store_fselect_instance</dt>
<dd><p>(<code>logical(1)</code>)<br>
If <code>TRUE</code> (default), stores the internally created <a href="FSelectInstanceSingleCrit.html">FSelectInstanceSingleCrit</a> with all intermediate results in slot <code>$fselect_instance</code>.
Is set to <code>TRUE</code>, if <code>store_models = TRUE</code></p></dd>


<dt>store_benchmark_result</dt>
<dd><p>(<code>logical(1)</code>)<br>
Store benchmark result in archive?</p></dd>


<dt>store_models</dt>
<dd><p>(<code>logical(1)</code>).
Store models in benchmark result?</p></dd>


<dt>check_values</dt>
<dd><p>(<code>logical(1)</code>)<br>
Check the parameters before the evaluation and the results for
validity?</p></dd>


<dt>callbacks</dt>
<dd><p>(list of <a href="CallbackFSelect.html">CallbackFSelect</a>)<br>
List of callbacks.</p></dd>


<dt>...</dt>
<dd><p>(named <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>)<br>
Named arguments to be set as parameters of the fselector.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><a href="AutoFSelector.html">AutoFSelector</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <a href="AutoFSelector.html">AutoFSelector</a> is a <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a> which wraps another <a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">mlr3::Learner</a> and performs the following steps during <code>$train()</code>:</p><ol><li><p>The wrapped (inner) learner is trained on the feature subsets via resampling.
The feature selection can be specified by providing a <a href="FSelector.html">FSelector</a>, a <a href="https://bbotk.mlr-org.com/reference/Terminator.html" class="external-link">bbotk::Terminator</a>, a <a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a> and a <a href="https://mlr3.mlr-org.com/reference/Measure.html" class="external-link">mlr3::Measure</a>.</p></li>
<li><p>A final model is fit on the complete training data with the best found feature subset.</p></li>
</ol><p>During <code>$predict()</code> the <a href="AutoFSelector.html">AutoFSelector</a> just calls the predict method of the wrapped (inner) learner.</p>
    </div>
    <div class="section level2">
    <h2 id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a></h2>
    

<ul><li><p><a href="https://mlr3book.mlr-org.com/feature-selection.html#autofselect" class="external-link">book chapter</a> on automatic feature selection.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="nested-resampling">Nested Resampling<a class="anchor" aria-label="anchor" href="#nested-resampling"></a></h2>
    

<p>Nested resampling can be performed by passing an <a href="AutoFSelector.html">AutoFSelector</a> object to <code><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">mlr3::resample()</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/benchmark.html" class="external-link">mlr3::benchmark()</a></code>.
To access the inner resampling results, set <code>store_fselect_instance = TRUE</code> and execute <code><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">mlr3::resample()</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/benchmark.html" class="external-link">mlr3::benchmark()</a></code> with <code>store_models = TRUE</code> (see examples).
The <a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a> passed to the <a href="AutoFSelector.html">AutoFSelector</a> is meant to be the inner resampling, operating on the training set of an arbitrary outer resampling.
For this reason it is not feasible to pass an instantiated <a href="https://mlr3.mlr-org.com/reference/Resampling.html" class="external-link">mlr3::Resampling</a> here.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Automatic Feature Selection</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># split to train and external set</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu">tsk</span><span class="op">(</span><span class="st">"penguins"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">split</span> <span class="op">=</span> <span class="fu">partition</span><span class="op">(</span><span class="va">task</span>, ratio <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create auto fselector</span></span></span>
<span class="r-in"><span><span class="va">afs</span> <span class="op">=</span> <span class="fu">auto_fselector</span><span class="op">(</span></span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="fu"><a href="fs.html">fs</a></span><span class="op">(</span><span class="st">"random_search"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  learner <span class="op">=</span> <span class="fu">lrn</span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  resampling <span class="op">=</span> <span class="fu">rsmp</span> <span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="fu">msr</span><span class="op">(</span><span class="st">"classif.ce"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  term_evals <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># optimize feature subset and fit final model</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="va">task</span>, row_ids <span class="op">=</span> <span class="va">split</span><span class="op">$</span><span class="va">train</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># predict with final model</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">task</span>, row_ids <span class="op">=</span> <span class="va">split</span><span class="op">$</span><span class="va">test</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;PredictionClassif&gt; for 69 observations:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     row_ids     truth  response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           3    Adelie    Adelie</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           7    Adelie    Adelie</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          12    Adelie    Adelie</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         334 Chinstrap Chinstrap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         337 Chinstrap Chinstrap</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         338 Chinstrap Chinstrap</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show result</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">fselect_result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island  sex year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE   TRUE TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                          features classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: bill_depth,bill_length,body_mass,flipper_length,island,sex,... 0.04347826</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># model slot contains trained learner and fselect instance</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">model</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $learner</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;LearnerClassifRpart:classif.rpart&gt;: Classification Tree</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Model: rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Parameters: xval=0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Packages: mlr3, rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Predict Types:  [response], prob</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Feature Types: logical, integer, numeric, factor, ordered</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Properties: importance, missings, multiclass, selected_features,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   twoclass, weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $features</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "bill_depth"     "bill_length"    "body_mass"      "flipper_length"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "island"         "sex"            "year"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fselect_instance</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;FSelectInstanceSingleCrit&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * State:  Optimized</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Objective: &lt;ObjectiveFSelect:classif.rpart_on_penguins&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Terminator: &lt;TerminatorEvals&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Result:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island  sex year classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE   TRUE TRUE TRUE 0.04347826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Archive:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island   sex  year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE   TRUE  TRUE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:       TRUE       FALSE      TRUE          FALSE  FALSE  TRUE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      FALSE       FALSE     FALSE          FALSE  FALSE  TRUE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:       TRUE       FALSE     FALSE          FALSE  FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.04347826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 0.28260870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 0.59782609</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 0.27173913</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># shortcut trained learner</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">learner</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;LearnerClassifRpart:classif.rpart&gt;: Classification Tree</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Model: rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Parameters: xval=0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Packages: mlr3, rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Predict Types:  [response], prob</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Feature Types: logical, integer, numeric, factor, ordered</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Properties: importance, missings, multiclass, selected_features,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   twoclass, weights</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># shortcut fselect instance</span></span></span>
<span class="r-in"><span><span class="va">afs</span><span class="op">$</span><span class="va">fselect_instance</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;FSelectInstanceSingleCrit&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * State:  Optimized</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Objective: &lt;ObjectiveFSelect:classif.rpart_on_penguins&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Terminator: &lt;TerminatorEvals&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Result:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island  sex year classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE   TRUE TRUE TRUE 0.04347826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * Archive:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    bill_depth bill_length body_mass flipper_length island   sex  year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:       TRUE        TRUE      TRUE           TRUE   TRUE  TRUE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:       TRUE       FALSE      TRUE          FALSE  FALSE  TRUE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      FALSE       FALSE     FALSE          FALSE  FALSE  TRUE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:       TRUE       FALSE     FALSE          FALSE  FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.04347826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 0.28260870</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 0.59782609</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 0.27173913</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Nested Resampling</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">afs</span> <span class="op">=</span> <span class="fu">auto_fselector</span><span class="op">(</span></span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="fu"><a href="fs.html">fs</a></span><span class="op">(</span><span class="st">"random_search"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  learner <span class="op">=</span> <span class="fu">lrn</span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  resampling <span class="op">=</span> <span class="fu">rsmp</span> <span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="fu">msr</span><span class="op">(</span><span class="st">"classif.ce"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  term_evals <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">resampling_outer</span> <span class="op">=</span> <span class="fu">rsmp</span><span class="op">(</span><span class="st">"cv"</span>, folds <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rr</span> <span class="op">=</span> <span class="fu">resample</span><span class="op">(</span><span class="va">task</span>, <span class="va">afs</span>, <span class="va">resampling_outer</span>, store_models <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># retrieve inner feature selection results.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="extract_inner_fselect_results.html">extract_inner_fselect_results</a></span><span class="op">(</span><span class="va">rr</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    iteration bill_depth bill_length body_mass flipper_length island  sex year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:         1      FALSE        TRUE     FALSE           TRUE  FALSE TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:         2      FALSE        TRUE      TRUE           TRUE   TRUE TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:         3      FALSE        TRUE      TRUE           TRUE   TRUE TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce                                             features  task_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.06578947                  bill_length,flipper_length,sex,year penguins</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 0.03947368 bill_length,body_mass,flipper_length,island,sex,year penguins</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 0.03896104 bill_length,body_mass,flipper_length,island,sex,year penguins</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 learner_id resampling_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: classif.rpart.fselector            cv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: classif.rpart.fselector            cv</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: classif.rpart.fselector            cv</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># performance scores estimated on the outer resampling</span></span></span>
<span class="r-in"><span><span class="va">rr</span><span class="op">$</span><span class="fu">score</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 task  task_id             learner              learner_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: &lt;TaskClassif[50]&gt; penguins &lt;AutoFSelector[46]&gt; classif.rpart.fselector</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: &lt;TaskClassif[50]&gt; penguins &lt;AutoFSelector[46]&gt; classif.rpart.fselector</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: &lt;TaskClassif[50]&gt; penguins &lt;AutoFSelector[46]&gt; classif.rpart.fselector</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            resampling resampling_id iteration              prediction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: &lt;ResamplingCV[20]&gt;            cv         1 &lt;PredictionClassif[20]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: &lt;ResamplingCV[20]&gt;            cv         2 &lt;PredictionClassif[20]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: &lt;ResamplingCV[20]&gt;            cv         3 &lt;PredictionClassif[20]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    classif.ce</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 0.08695652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 0.03478261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 0.07894737</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># unbiased performance of the final model trained on the full data set</span></span></span>
<span class="r-in"><span><span class="va">rr</span><span class="op">$</span><span class="fu">aggregate</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> classif.ce </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0668955 </span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Marc Becker, Patrick Schratz, Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

